<body>
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8 col-sm-12 p-5">
      <!-- Title -->
      <h2 class="mb-4 text-center">Request Resource</h2>
      <form [formGroup]="requestForm" (ngSubmit)="createOrUpdateRequest()">
        <!-- User Email -->
        <div class="mb-4">
          <label for="user-email" class="form-label">User Email</label>
          <input
            formControlName="user_email"
            type="email"
            class="form-control"
            id="user-email"
            aria-describedby="user-email-help"
            [ngClass]="{
              'is-invalid': requestForm.get('user_email')?.invalid && requestForm.get('user_email')?.touched,
              'is-valid': requestForm.get('user_email')?.valid && requestForm.get('user_email')?.touched
            }"
          />
          <small id="user-email-help" class="form-text text-muted">Enter your registered email address.</small>
          <div *ngIf="requestForm.get('user_email')?.invalid && requestForm.get('user_email')?.touched" class="alert alert-danger mt-2">
            <span *ngIf="requestForm.get('user_email')?.errors?.['required']">Email is required.</span>
            <span *ngIf="requestForm.get('user_email')?.errors?.['email']">Invalid email format.</span>
          </div>
        </div>

        <!-- Resource Name (Dropdown) -->
        <div class="mb-4">
          <label for="resource-name" class="form-label">Resource Name</label>
          <select
            formControlName="resource_name"
            class="form-select"
            id="resource-name"
            aria-describedby="resource-name-help"
            [ngClass]="{
              'is-invalid': requestForm.get('resource_name')?.invalid && requestForm.get('resource_name')?.touched,
              'is-valid': requestForm.get('resource_name')?.valid && requestForm.get('resource_name')?.touched
            }"
          >
            <option value="" disabled>Select a Resource</option>
            <option *ngFor="let resource of availableResources" [value]="resource.resource_name">
              {{ resource.resource_name }}
            </option>
          </select>
          <small id="resource-name-help" class="form-text text-muted">Choose a resource from the list.</small>
          <div *ngIf="requestForm.get('resource_name')?.invalid && requestForm.get('resource_name')?.touched" class="alert alert-danger mt-2">
            <span *ngIf="requestForm.get('resource_name')?.errors?.['required']">Resource name is required.</span>
          </div>
        </div>

        <!-- Requested Quantity -->
        <div class="mb-4">
          <label for="requested-quantity" class="form-label">Requested Quantity</label>
          <input
            formControlName="requested_quantity"
            type="number"
            class="form-control"
            id="requested-quantity"
            aria-describedby="requested-quantity-help"
            [ngClass]="{
              'is-invalid': requestForm.get('requested_quantity')?.invalid && requestForm.get('requested_quantity')?.touched,
              'is-valid': requestForm.get('requested_quantity')?.valid && requestForm.get('requested_quantity')?.touched
            }"
          />
          <small id="requested-quantity-help" class="form-text text-muted">Specify the quantity you need (1-99,999,999).</small>
          <div *ngIf="requestForm.get('requested_quantity')?.invalid && requestForm.get('requested_quantity')?.touched" class="alert alert-danger mt-2">
            <span *ngIf="requestForm.get('requested_quantity')?.errors?.['required']">Quantity is required.</span>
            <span *ngIf="requestForm.get('requested_quantity')?.errors?.['min']">Minimum quantity should be 1.</span>
            <span *ngIf="requestForm.get('requested_quantity')?.errors?.['max']">Maximum quantity is 99,999,999.</span>
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary w-100" [disabled]="requestForm.invalid">
          {{ buttonText }}
        </button>
      </form>
    </div>
  </div>
</body>
